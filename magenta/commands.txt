INPUT_DIRECTORY=/magenta-datasets/Wikifonia

	OR

INPUT_DIRECTORY=/media/Extra/Magenta_Datasets/Wikifonia



# TFRecord file that will contain NoteSequence protocol buffers.
SEQUENCES_TFRECORD=/tmp/WikifoniaNoteSequences.tfrecord

convert_dir_to_note_sequences --input_dir=$INPUT_DIRECTORY --output_file=$SEQUENCES_TFRECORD --recursive

# create dataset
improv_rnn_create_dataset --config=chord_pitches_improv --input=$SEQUENCES_TFRECORD --output_dir=/tmp/improv_rnn/sequence_examples --eval_ratio=0.10


# Train
improv_rnn_train --config=chord_pitches_improv --run_dir=/tmp/improv_rnn/logdir/run1 --sequence_example_file=/tmp/improv_rnn/sequence_examples/training_lead_sheets.tfrecord --hparams="batch_size=256,rnn_layer_sizes=[128,128]" --num_training_steps=20000
# Eval job (run in parallel)
improv_rnn_train --config=chord_pitches_improv --run_dir=/tmp/improv_rnn/logdir/run1 --sequence_example_file=/tmp/improv_rnn/sequence_examples/training_lead_sheets.tfrecord --hparams="batch_size=256,rnn_layer_sizes=[128,128]" --num_training_steps=20000 --eval

# to view training data @ localhost:6006
tensorboard --logdir=/tmp/improv_rnn/logdir


# to generate audio (during or after training)
improv_rnn_generate --config=chord_pitches_improv --run_dir=/tmp/improv_rnn/logdir/run1 --output_dir=/magenta-data/Audio --hparams="batch_size=256,rnn_layer_sizes=[128,128]" --num_outputs=2 --primer_melody="[57]" --backing_chords="Am Dm G C F Bdim E E" --render_chords

########
1/9/19

Trained for ~5hr 15min with above parameters to "decent" results, especially given a priming melody

########

